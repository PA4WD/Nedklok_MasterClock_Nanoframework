<!DOCTYPE html>
<script>
    //only edge browser works
    let ws = new WebSocket("ws://192.168.0.103:80/ws");
    ws.binaryType = "arraybuffer";

    ws.onopen = function (e) {
        //ws.send("My name is John");
    };
    ws.onmessage = function (event) {
        //console.log(event.data);
        document.querySelector("#utcTime").innerHTML = event.data;
    };
    ws.onclose = function (event) {
        if (event.wasClean) {
            alert(`[close] Connection closed cleanly, code=${event.code} reason=${event.reason}`);
        } else {
            // e.g. server process killed or network down
            // event.code is usually 1006 in this case
            alert(`[close] Connection died, code=${event.code} reason=${event.reason}`);
        }
    };
    ws.onerror = function (error) {
        alert(`[error] ${error.message}`);
    };

    function startClock() {
        ws.send("startclock");
    }
    function stopClock() {
        ws.send("stopclock");
    }
    function addSeconds(sec) {
        ws.send(`add ${sec}`);
    }
    function waitSeconds(sec) {
        ws.send(`wait ${sec}`);
    }
</script>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Nedklok Masterclock</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
    <h1>Nedklok Masterclock</h1>

    <br />
    <h1 id=utcTime>Waiting .....</h1>
    <p>( Time in UTC)</p>
    <br />

    <button onclick="startClock()">Start Clock</button>
    <br />
    <button onclick="stopClock()">Stop Clock</button>
    <br />
    <button onclick="addSeconds(1)">add Second</button>
    <br />
    <button onclick="addSeconds(60)">add Minute</button>
    <br />
    <button onclick="addSeconds(3600)">add Hour</button>
    <br />
    <button onclick="addSeconds(39600)">add 11 Hours</button>

    <br />
    <button onclick="waitSeconds(1)">wait Second</button>
    <br />
    <button onclick="waitSeconds(60)">wait Minute</button>
    <br />
    <button onclick="waitSeconds(3600)">wait Hour</button>
    <br />
    <button onclick="waitSeconds(39600)">wait 11 Hours</button>


</body>
</html>